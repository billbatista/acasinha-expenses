{{define "title"}}Meu Perfil - Despesas{{end}}

{{define "styles"}}
.profile-header {
    text-align: center;
    margin-bottom: 2rem;
}

.profile-info {
    background-color: var(--pico-card-background-color);
    padding: 1.5rem;
    border-radius: 0.5rem;
    margin-bottom: 2rem;
}

.info-row {
    display: flex;
    justify-content: space-between;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--pico-muted-border-color);
}

.info-row:last-child {
    border-bottom: none;
}

.info-label {
    font-weight: 600;
    color: var(--pico-muted-color);
}

.info-value {
    color: var(--pico-color);
}

.success {
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 0.5rem;
    background-color: #c6f6d5;
    color: #22543d;
}

.success:empty {
    display: none;
}
.
{{end}}

{{define "content"}}
    <article>
        <div class="profile-header">
            <div class="profile-picture">
                <img src="/user/profile/avatar" alt="User Avatar" style="width: 100%; height: 100%; object-fit: cover;">
            </div>
        </div>

        {{if .Success}}
        <div class="success" role="alert">{{.Success}}</div>
        {{end}}

        {{if .Error}}
        <div class="error" role="alert">{{.Error}}</div>
        {{end}}

        <section class="profile-info">
            <h2>Dados</h2>
            <div class="info-row">
                <span class="info-label">Email</span>
                <span class="info-value">{{.User.Email}}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Nome</span>
                <span class="info-value">
                    {{if .User.Name}}
                        {{.User.Name}}
                    {{else}}
                        <em></em>
                    {{end}}
                </span>
            </div>
            <div class="info-row">
                <span class="info-label">Membro desde</span>
                <span class="info-value">{{.User.CreatedAt.Format "January 2, 2006"}}</span>
            </div>
        </section>

        <section>
            <h3>Atualizar foto de perfil</h2>
            <form
                method="POST"
                action="/user/profile/update-avatar"
                enctype="multipart/form-data">
                <label for="avatar">
                    <input 
                        type="file" 
                        id="avatar" 
                        name="avatar" 
                        accept="image/png, image/jpeg">
                </label>
                <button type="submit">Enviar</button>
            </form>
            <h3>Atualizar nome</h2>
            <form method="POST" action="/user/profile/update-name">
                <label for="name">
                    Name
                    <input 
                        type="text" 
                        id="name" 
                        name="name" 
                        placeholder=""
                        value="{{.User.Name}}"
                    >
                </label>

                <button type="submit">Enviar</button>
            </form>
        </section>

        <footer style="margin-top: 2rem;">
            <a href="/dashboard" role="button" class="secondary">Back to Dashboard</a>
        </footer>
    </article>
{{end}}